<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PhotoShare Credential Detector</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      margin: 20px;
      background-color: #f5f5f5;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .step {
      background: #f8f9fa;
      border-left: 4px solid #007bff;
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
    }
    .credentials {
      background: #d4edda;
      border-left: 4px solid #28a745;
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
      font-family: 'Monaco', 'Menlo', monospace;
      font-size: 12px;
    }
    .error {
      background: #f8d7da;
      border-left: 4px solid #dc3545;
      padding: 15px;
      margin: 10px 0;
      border-radius: 5px;
    }
    button {
      background: #007bff;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 5px;
      margin: 5px;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
    .success {
      background: #28a745;
    }
    .warning {
      background: #ffc107;
      color: #212529;
    }
    input[type="url"] {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 5px;
      margin: 5px 0;
    }
    pre {
      background: #f8f9fa;
      padding: 10px;
      border-radius: 5px;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üîç PhotoShare Credential Detector</h1>
    <p>This tool helps you find Supabase credentials from photo-share.app for live testing.</p>

    <div class="step">
      <h3>üìã Instructions</h3>
      <ol>
        <li><strong>Open photo-share.app</strong> in a new tab</li>
        <li><strong>Open Developer Tools</strong> (F12 or right-click ‚Üí Inspect)</li>
        <li><strong>Go to Console tab</strong> in Developer Tools</li>
        <li><strong>Copy and paste</strong> the detection scripts below</li>
        <li><strong>Look for the output</strong> showing Supabase credentials</li>
      </ol>
    </div>

    <div class="step">
      <h3>üîé Method 1: Check Window Objects</h3>
      <p>Paste this in the Console tab on photo-share.app:</p>
      <pre id="script1">// PhotoShare Credential Detector - Method 1
console.log('üîç Scanning for Supabase credentials...');

// Check common window properties
const checks = [
  'window.supabase',
  'window.supabaseClient', 
  'window.SUPABASE_URL',
  'window.SUPABASE_ANON_KEY',
  'window.REACT_APP_SUPABASE_URL',
  'window.REACT_APP_SUPABASE_ANON_KEY',
  'window.VITE_SUPABASE_URL',
  'window.VITE_SUPABASE_ANON_KEY',
  'window.NEXT_PUBLIC_SUPABASE_URL',
  'window.NEXT_PUBLIC_SUPABASE_ANON_KEY'
];

let found = false;
checks.forEach(prop => {
  try {
    const value = eval(prop);
    if (value) {
      console.log(`‚úÖ Found: ${prop} =`, value);
      found = true;
    }
  } catch (e) {
    // Property doesn't exist, that's ok
  }
});

// Check if we can find the client configuration
if (window.supabase && window.supabase.supabaseUrl) {
  console.log('üéØ FOUND SUPABASE CONFIG:');
  console.log('URL:', window.supabase.supabaseUrl);
  console.log('Key:', window.supabase.supabaseKey);
  found = true;
}

if (!found) {
  console.log('‚ùå No obvious Supabase credentials found in window objects');
}</pre>
      <button onclick="copyScript('script1')">üìã Copy Script</button>
    </div>

    <div class="step">
      <h3>üï∑Ô∏è Method 2: Scan Page Source</h3>
      <p>Paste this in the Console tab on photo-share.app:</p>
      <pre id="script2">// PhotoShare Credential Detector - Method 2
console.log('üîç Scanning page source for Supabase patterns...');

const bodyText = document.documentElement.innerHTML;
const patterns = [
  /https:\/\/[a-zA-Z0-9-]+\.supabase\.co/g,
  /eyJ[a-zA-Z0-9-_]+\.[a-zA-Z0-9-_]+\.[a-zA-Z0-9-_]+/g, // JWT pattern
  /supabaseUrl["\s]*[:=]["\s]*"([^"]+)"/gi,
  /supabaseKey["\s]*[:=]["\s]*"([^"]+)"/gi,
  /SUPABASE_URL["\s]*[:=]["\s]*"([^"]+)"/gi,
  /SUPABASE_ANON_KEY["\s]*[:=]["\s]*"([^"]+)"/gi
];

let found = false;
patterns.forEach((pattern, index) => {
  const matches = [...bodyText.matchAll(pattern)];
  if (matches.length > 0) {
    console.log(`‚úÖ Pattern ${index + 1} matches:`, matches.map(m => m[0] || m[1]).filter(Boolean));
    found = true;
  }
});

if (!found) {
  console.log('‚ùå No Supabase patterns found in page source');
}</pre>
      <button onclick="copyScript('script2')">üìã Copy Script</button>
    </div>

    <div class="step">
      <h3>üåê Method 3: Network Analysis</h3>
      <p>Manual steps in Developer Tools:</p>
      <ol>
        <li>Go to <strong>Network tab</strong> in Developer Tools</li>
        <li>Reload photo-share.app</li>
        <li>Look for requests to <strong>*.supabase.co</strong> domains</li>
        <li>Check the request headers for API keys</li>
        <li>Look at JavaScript files for configuration objects</li>
      </ol>
    </div>

    <div class="step">
      <h3>‚ö° Quick Test</h3>
      <p>If you found credentials, test them here:</p>
      <input type="url" id="supabaseUrl" placeholder="https://your-project.supabase.co" />
      <input type="text" id="supabaseKey" placeholder="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." />
      <br>
      <button onclick="testCredentials()" class="success">üß™ Test Credentials</button>
      <button onclick="generateConfig()" class="warning">‚öôÔ∏è Generate Config</button>
    </div>

    <div id="results"></div>

    <div class="step">
      <h3>üîß Alternative: Use Browser Extension</h3>
      <p>If the above methods don't work, you can:</p>
      <ul>
        <li>Use a browser extension like "React Developer Tools"</li>
        <li>Look for environment variables in the React/Vue/Angular app</li>
        <li>Check the website's robots.txt or .well-known directories</li>
        <li>Contact the photo-share.app developers for API documentation</li>
      </ul>
    </div>
  </div>

  <script>
    function copyScript(scriptId) {
      const script = document.getElementById(scriptId).textContent;
      navigator.clipboard.writeText(script).then(() => {
        alert('Script copied to clipboard! Paste it in the Console tab on photo-share.app');
      });
    }

    async function testCredentials() {
      const url = document.getElementById('supabaseUrl').value;
      const key = document.getElementById('supabaseKey').value;
      const results = document.getElementById('results');

      if (!url || !key) {
        results.innerHTML = '<div class="error">Please enter both Supabase URL and API key</div>';
        return;
      }

      results.innerHTML = '<div class="step">üîÑ Testing credentials...</div>';

      try {
        // Test basic connection
        const response = await fetch(`${url}/rest/v1/`, {
          headers: {
            'apikey': key,
            'Authorization': `Bearer ${key}`
          }
        });

        if (response.ok) {
          results.innerHTML = `
            <div class="credentials">
              <h4>‚úÖ Credentials Valid!</h4>
              <p><strong>URL:</strong> ${url}</p>
              <p><strong>Key:</strong> ${key.substring(0, 50)}...</p>
              <p>Response Status: ${response.status} ${response.statusText}</p>
            </div>
          `;
        } else {
          results.innerHTML = `
            <div class="error">
              <h4>‚ùå Connection Failed</h4>
              <p>Status: ${response.status} ${response.statusText}</p>
              <p>This might still be valid - some endpoints require authentication</p>
            </div>
          `;
        }
      } catch (error) {
        results.innerHTML = `
          <div class="error">
            <h4>‚ùå Error Testing Credentials</h4>
            <p>${error.message}</p>
            <p>This might be due to CORS restrictions - credentials could still be valid</p>
          </div>
        `;
      }
    }

    function generateConfig() {
      const url = document.getElementById('supabaseUrl').value;
      const key = document.getElementById('supabaseKey').value;
      const results = document.getElementById('results');

      if (!url || !key) {
        results.innerHTML = '<div class="error">Please enter both Supabase URL and API key first</div>';
        return;
      }

      const configCode = `
// Add this to your config.js file:
window.PHOTOSHARE_CONFIG = {
  website: {
    url: 'https://photo-share.app',
    useRealWebsite: true  // ‚Üê Changed to true
  },
  
  supabase: {
    url: '${url}',
    anonKey: '${key}',
    useRealSupabase: true  // ‚Üê Changed to true
  },
  
  // ... rest of your config
};
`;

      results.innerHTML = `
        <div class="credentials">
          <h4>‚öôÔ∏è Generated Configuration</h4>
          <p>Copy this configuration to your config.js file:</p>
          <pre>${configCode}</pre>
          <button onclick="copyConfig()">üìã Copy Configuration</button>
        </div>
      `;

      // Store for copying
      window.generatedConfig = configCode;
    }

    function copyConfig() {
      if (window.generatedConfig) {
        navigator.clipboard.writeText(window.generatedConfig).then(() => {
          alert('Configuration copied! Now update your config.js file.');
        });
      }
    }

    // Auto-fill some common patterns
    document.addEventListener('DOMContentLoaded', function() {
      // Check if we're on photo-share.app and can detect credentials
      if (window.location.hostname === 'photo-share.app') {
        setTimeout(() => {
          alert('You are on photo-share.app! Open Developer Tools (F12) ‚Üí Console tab and paste the detection scripts.');
        }, 1000);
      }
    });
  </script>
</body>
</html>